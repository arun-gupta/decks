<!DOCTYPE html><html lang="en" class="aspect-16-9"><head><meta charset="UTF-8" /><meta name="generator" content="Asciidoctor 1.5.0.preview.1, dzslides backend" /><title>HTTP/2</title><meta name="author" content="Arun Gupta" /><link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Neuton:400,700,800,400italic|Cedarville+Cursive" /><link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css" /><link rel="stylesheet" href="./dzslides/themes/highlight/asciidoctor.css" /><link rel="stylesheet" href="./dzslides/themes/style/asciidoctor.css" /><style>section:not(.topic) > h2 { display: none;}</style><link rel="stylesheet" href="./dzslides/core/dzslides.css" /><link rel="stylesheet" href="./dzslides/themes/transition/fade.css" /></head><body><section class="title"><h1>HTTP/2</h1><footer><span class="author">Arun Gupta</span><span class="divider">&nbsp;&middot;&nbsp;</span><span class="author">Red Hat</span><span class="divider">&nbsp;&middot;&nbsp;</span><span class="author">@arungupta</span></footer></section><section class="topic source"><h2>Arun Gupta</h2><div class="exampleblock"><div class="content"><ul><li>Director, Developer Advocacy, Red Hat Inc.</li><li>O&#8217;Reilly and McGraw Hill author</li><li>Fitness freak</li></ul></div></div>
<details><details open=""><summary>Notes</summary><ul><li>My name is Arun Gupta, and I drive community engagement efforts for JBoss at Red Hat</li><li>I&#8217;ve authored couple of O&#8217;Reilly best selling books and another one by McGraw Hill</li><li>I&#8217;m a workout nut as my kids call me and a runner</li></ul></details></details></section>
<section><p>"HTTP/2 enables a more <em>efficient</em> use of network resources and a reduced perception of latency by introducing <em>header field compression</em> and allowing <em>multiple concurrent messages</em> on the same connection. It also introduces <em>unsolicited push</em> of representations from <em>servers to clients</em>."</p>
<p>&#8201;&#8212;&#8201;<a href="http://http2.github.io/http2-spec/">http://http2.github.io/http2-spec/</a></p></section>
<section class="topic source"><h2>Background</h2><ul><li>Wildfly successful &#8230; but &#8230;<ul><li>Allows <em>only one request</em> to be outstanding at a time on a given connection</li><li>HTTP/1.1 pipelining only <em>partially addressed request concurrency</em></li><li>Header fields are often <em>repetitive and verbose</em></li></ul></li></ul>
<details><details open=""><summary>Notes</summary><ul><li>HTTP/1.1 pipelining only partially addressed request concurrency and suffers from head-of-line blocking. Therefore, clients that need to make many requests typically use multiple connections to a server in order to reduce latency.</li><li>HTTP/1.1 header fields are often repetitive and verbose, which, in addition to generating more or larger network packets, can cause the small initial TCP congestion window to quickly fill. This can result in excessive latency when multiple requests are made on a single new TCP connection.</li></ul></details></details></section>
<section class="topic source"><h2>HTTP/2 to rescue</h2><ul class="incremental"><li>Optimized mapping of HTTP&#8217;s semantics to an underlying connection</li><li>Allows prioritization of requests</li><li>Fewer TCP connections</li><li>Binary message framing</li></ul>
<details><details open=""><summary>Notes</summary><ul><li>Defines an optimized mapping of HTTP&#8217;s semantics to an underlying connection. Specifically, it allows interleaving of request and response messages on the same connection and uses an efficient coding for HTTP header fields.</li><li>Allows prioritization of requests, letting more important requests complete more quickly, further improving performance</li><li>The resulting protocol is designed to be more friendly to the network, because fewer TCP connections can be used in comparison to HTTP/1.x. This means less competition with other flows, and longer-lived connections, which in turn leads to better utilization of available network capacity.</li><li>Finally, this encapsulation also enables more scalable processing of messages through use of binary message framing.</li></ul></details></details></section>
<section class="topic source"><h2>!</h2><p class="statement"><code>Essence of HTTP/2:</code><br />
HTTP/2 supports all of the core features of HTTP/1.1, but aims to be more <em>efficient</em> in several ways.</p></section>
<section class="topic source"><h2>Overview</h2><ul class="incremental"><li>Frame</li><li>Streams</li><li>Flow control and prioritization</li><li>Server push</li><li>Compressed HTTP header fields</li></ul>
<details><details open=""><summary>Notes</summary><ul><li>The basic protocol unit in HTTP/2 is a frame (Section 4.1). Each frame has a different type and purpose. For example, HEADERS and DATA frames form the basis of HTTP requests and responses (Section 8.1); other frame types like SETTINGS, WINDOW_UPDATE, and PUSH_PROMISE are used in support of other HTTP/2 features.</li><li>Multiplexing of requests is achieved by having each HTTP request-response exchanged assigned to a single stream (Section 5). Streams are largely independent of each other, so a blocked or stalled request does not prevent progress on other requests.</li><li>While some of the frame and stream layer concepts are isolated from HTTP, the intent is not to define a completely generic framing layer. The framing and streams layers are tailored to the needs of the HTTP protocol and server push.</li><li>Flow control and prioritization ensure that it is possible to properly use multiplexed streams. Flow control (Section 5.2) helps to ensure that only data that can be used by a receiver is transmitted. Prioritization (Section 5.3) ensures that limited resources can be directed to the most important requests first.</li><li>HTTP/2 adds a new interaction mode, whereby a server can push responses to a client (Section 8.2). Server push allows a server to speculatively send a client data that the server anticipates the client will need, trading off some network usage against a potential latency gain. The server does this by synthesizing a request, which it sends as a PUSH_PROMISE frame. The server is then able to send a response to the synthetic request on an separate stream.</li><li>Frames that contain HTTP header fields are compressed (Section 4.3). HTTP requests can be highly redundant, so compression can reduce the size of requests and responses significantly.</li></ul></details></details></section>
<section class="topic source"><h2>Starting HTTP/2</h2><ul><li>"http" and "https" URI schemes from HTTP/1.1</li><li>Uses standard HTTP Upgrade</li></ul>
<div class="listingblock"><pre class="highlight CodeRay"><code class="no-highlight">GET /default.htm HTTP/1.1
Host: server.example.com
Connection: Upgrade, HTTP2-Settings
Upgrade: h2
HTTP2-Settings: &lt;base64url encoding of HTTP/2 SETTINGS payload&gt;</code></pre></div>
<details><details open=""><summary>Notes</summary><ul><li>A client that makes a request to an "http" URI without prior knowledge about support for HTTP/2 uses the HTTP Upgrade mechanism (Section 6.7 of). The client makes an HTTP/1.1 request that includes an Upgrade header field identifying HTTP/2 with the h2 token. The HTTP/1.1 request MUST include exactly one HTTP2-Settings (Section 3.2.1) header field.</li><li>Requests that contain an entity body MUST be sent in their entirety before the client can send HTTP/2 frames. This means that a large request entity can block the use of the connection until it is completely sent.</li><li>If concurrency of an initial request with subsequent requests is important, a small request can be used to perform the upgrade to HTTP/2, at the cost of an additional round-trip.</li></ul></details></details></section>
<section class="topic source"><h2>HTTP/2 Handshake Response</h2><div class="listingblock"><div class="title"><code>Does not support HTTP/2</code></div><pre class="highlight CodeRay"><code class="no-highlight">HTTP/1.1 200 OK
Content-Length: 243
Content-Type: text/html

...</code></pre></div>
<div class="listingblock"><div class="title"><code>Support HTTP/2</code></div><pre class="highlight CodeRay"><code class="no-highlight">HTTP/1.1 101 Switching Protocols
Connection: Upgrade
Upgrade: h2

[ HTTP/2 connection ...</code></pre></div>
<details><details open=""><summary>Notes</summary><ul><li>A server that does not support HTTP/2 can respond to the request as though the Upgrade header field were absent.</li><li>A server that supports HTTP/2 can accept the upgrade with a 101 (Switching Protocols) response. After the empty line that terminates the 101 response, the server can begin sending HTTP/2 frames. These frames MUST include a response to the request that initiated the Upgrade.</li><li>The first HTTP/2 frame sent by the server is a SETTINGS frame (Section 6.5). Upon receiving the 101 response, the client sends a connection preface (Section 3.5), which includes a SETTINGS frame.</li><li>The HTTP/1.1 request that is sent prior to upgrade is assigned stream identifier 1 and is assigned the highest possible priority. Stream 1 is implicitly half closed from the client toward the server, since the request is completed as an HTTP/1.1 request. After commencing the HTTP/2 connection, stream 1 is used for the response.</li></ul></details></details></section>
<section class="topic source"><h2>Timelines</h2><ul><li>When ?</li></ul></section>
<section class="topic source"><h2>References</h2><div class="admonitionblock note"><table><tr><td class="icon"><i class="icon-note" title="Note"></i></td><td class="content">Source: <a href="https://github.com/arun-gupta/decks/http2">https://github.com/arun-gupta/decks/http2</a></td></tr></table></div>
<div class="admonitionblock note"><table><tr><td class="icon"><i class="icon-note" title="Note"></i></td><td class="content">HTTPBIS WG list: <a href="http://lists.w3.org/Archives/Public/ietf-http-wg/">http://lists.w3.org/Archives/Public/ietf-http-wg/</a></td></tr></table></div>
<div class="admonitionblock note"><table><tr><td class="icon"><i class="icon-note" title="Note"></i></td><td class="content">Spec: <a href="http://http2.github.io/">http://http2.github.io/</a></td></tr></table></div>
<div class="admonitionblock note"><table><tr><td class="icon"><i class="icon-note" title="Note"></i></td><td class="content">Slides generated with Asciidoctor and DZSlides backend</td></tr></table></div>
<div class="admonitionblock note"><table><tr><td class="icon"><i class="icon-note" title="Note"></i></td><td class="content">Original slide template - Dan Allen &amp; Sarah White</td></tr></table></div></section>
<section class="topic ending"><h2 class="name">Arun Gupta</h2><p class="footer"><em class="icon-twitter">&#8203;</em> @arungupta</p></section><script src="./dzslides/core/dzslides.js"></script><script src="./dzslides/highlight/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad()</script></body></html>